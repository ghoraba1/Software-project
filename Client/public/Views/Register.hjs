<!DOCTYPE html>
<html>

<head>
  <title>Register page</title>
  <link rel='stylesheet' href='../Styles/bootstrap.min.css' />
  <link rel='stylesheet' href='../Styles/style.css' />
  <script src="../Js/jquery-3.7.1.min.js" type="text/javascript"></script>
  <script src="../Js/bootstrap.min.js" type="text/javascript"></script>
  <script src="../Src/Register.js" type="text/javascript"></script>
  
  <script>
    
$(document).ready(function () {
  $("#registerBtn").click(function () {
    // Collect input values
    const username = $('#username').val();
    const email = $('#email').val();
    const password = $('#password').val();

    // Construct the data object
    const data = {
      username,
      email,
      password
    };

    console.log("Data to be sent:", data);

    // Perform the AJAX POST request
    $.ajax({
      type: "POST",
      url: '/api/v1/users/new',
      data: JSON.stringify(data),  // Convert data to JSON string
      contentType: "application/json",  // Set content type as JSON
      success: function (serverResponse) {
        // On success
        alert("Registered successfully!");
        console.log("Server Response:", serverResponse);
        location.href = '/login';  // Redirect to login page
      },
      error: function (errorResponse) {
        // On error
        console.error("Error Response:", errorResponse);
        alert(`Register error: ${errorResponse.responseText || "Unknown error"}`);
      }
    });
  });
});

  </script>
</head>

<body>

  <header>
    <nav class="navbar">
      <ul>
        <li><a class="active" href="">Home</a></li>
        <li><a class="active" href="">About</a></li>
        <li style="float:right;"><a class="active" href="">Login</a></li>
        <li style="float:right;"><a class="active" href="">Cart</a></li>
      </ul>
    </nav>
  </header>



  
  <div class="reg">
    <h1>Register new</h1>
  <form action="/submit" method="post">
    <label for="username">Username:</label>
    <input type="text" id="username" name="username" required><br><br>
    <label for="email" style="padding:13px">Email:</label>
    <input type="email" id="email" name="email" required><br><br>
    <label for="password" style="padding:1px">Password:</label>
    <input type="password" id="password" name="password" required><br><br>
    </div>
    <div class="regcont">
    <div class="regbutton">
      <button type="submit" class="register-btn" id="registerBtn">Register</button>
    </div>
    </form>
    </div>
  


  <footer class="text-center mt-4">
    <p>We are a group of Software engineers designing a site to sell products from various
      companies</p>
    <p> = Contributers include:-</p>
    <ul style="list-style-type: none">
      <li>Abdelrahman Ghoraba (add IDs if you want)</li>
      <li>Abdelrahman Elkhouly</li>
      <li>Mohamed Motawea</li>
      <li>Ali Wael</li>
      <li>Ahmad Alaa</li>
      <li>Omar Atef</li>
      <li>Ahmad Waleed</li>
    </ul>
    <p>We hope you like it :)</p>
    <p>&copy; 2024 The Superior Bros</p>
  </footer>

</body>


</html>
