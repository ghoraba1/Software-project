<!DOCTYPE html>
<html>

<head>
 <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register new</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="../Src/Register.js" type="text/javascript"></script>
  
  <script>
    
$(document).ready(function () {
  $("#registerBtn").click(function () {
    // Collect input values
    const username = $('#username').val();
    const email = $('#email').val();
    const password = $('#password').val();

    // Construct the data object
    const data = {
      username,
      email,
      password
    };

    console.log("Data to be sent:", data);

    // Perform the AJAX POST request
    $.ajax({
      type: "POST",
      url: '/api/v1/users/new',
      data: JSON.stringify(data),  // Convert data to JSON string
      contentType: "application/json",  // Set content type as JSON
      success: function (serverResponse) {
        // On success
        alert("Registered successfully!");
        console.log("Server Response:", serverResponse);
        location.href = '/login';  // Redirect to login page
      },
      error: function (errorResponse) {
        // On error
        console.error("Error Response:", errorResponse);
        alert(`Register error: ${errorResponse.responseText || "Unknown error"}`);
      }
    });
  });
});

  </script>
</head>


<body>

  <header>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand">Superior Bros</a>
      <div class="collapse navbar-collapse">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
          <li class="nav-item"><form style="">
            <input type="search" id="search_bar" name="search_bar">
          </form></li>
        </ul>
        <ul class="navbar-nav ml-auto">
          <li class="nav-item"><a class="nav-link" href="#">Cart</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Login</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Register</a></li>
        </ul>
      </div>
    </nav>
  </header>



  
 <div class="form-container">
    <h1 class="text-center">Register</h1>
    <form id="authForm">
      <div class="form-group">
        <label for="username">Username:</label>
        <input type="text" class="form-control" id="floatingInput" placeholder="Name :)" name="username" required>
      </div>
      <div class="form-group">
        <label for="email">Email:</label>
        <input type="email" class="form-control" id="floatingInput" placeholder="name@example.com" name="email" required>
      </div>
      <div class="form-group">
        <label for="password">Password:</label>
        <input type="password" class="form-control" id="floatingPassword" placeholder="Password" name="password" required>
      </div>
      <div class="button-group d-flex justify-content-between">
        <div style="position: relative;left:280px">
        <button type="button" class="btn btn-outline-success">Register</button>
        </div>
      </div>
    </form>
    <p id="errorMessage"></p>
  </div>


   <footer style="text-align:center">
    <p>We are a group of Software engineers designing a site to sell products from various
      companies</p>
    <p> = Contributers include:-</p>
    <ul style="list-style-type: none">
      <li>Abdelrahman Ghoraba (add IDs if you want)</li>
      <li>Abdelrahman Elkhouly</li>
      <li>Mohamed Motawea</li>
      <li>Ali Wael</li>
      <li>Ahmad Alaa</li>
      <li>Omar Atef</li>
      <li>Ahmad Waleed</li>
    </ul>
    <p>We hope you like it :)</p>
    <p>&copy; 2024 The Superior Bros</p>
  </footer>

</body>


</html>
